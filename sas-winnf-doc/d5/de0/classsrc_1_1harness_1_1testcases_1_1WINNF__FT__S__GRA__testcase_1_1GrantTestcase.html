<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SAS WINNF: src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAS WINNF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/d59/namespacesrc.html">src</a></li><li class="navelem"><a class="el" href="../../df/d5d/namespacesrc_1_1harness.html">harness</a></li><li class="navelem"><a class="el" href="../../db/d8a/namespacesrc_1_1harness_1_1testcases.html">testcases</a></li><li class="navelem"><a class="el" href="../../d3/d48/namespacesrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase.html">WINNF_FT_S_GRA_testcase</a></li><li class="navelem"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html">GrantTestcase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d8/d6d/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/db4/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase__inherit__graph.png" border="0" usemap="#src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_inherit__map" alt="Inheritance graph"/></div>
<map name="src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_inherit__map" id="src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_inherit__map">
<area shape="rect" id="node2" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html" title="src.harness.sas_testcase.\lSasTestCase" alt="" coords="81,169,257,211"/>
<area shape="rect" id="node3" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html" title="src.harness.sas_interface.\lSasTestcaseInterface" alt="" coords="5,80,181,121"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d97/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase__coll__graph.png" border="0" usemap="#src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_coll__map" alt="Collaboration graph"/></div>
<map name="src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_coll__map" id="src_8harness_8testcases_8WINNF__FT__S__GRA__testcase_8GrantTestcase_coll__map">
<area shape="rect" id="node2" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html" title="src.harness.sas_testcase.\lSasTestCase" alt="" coords="81,169,257,211"/>
<area shape="rect" id="node3" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html" title="src.harness.sas_interface.\lSasTestcaseInterface" alt="" coords="5,80,181,121"/>
</map>
<center><span class="legend">[<a href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa6e2d50c79461ae5d636beaa95d2715b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#aa6e2d50c79461ae5d636beaa95d2715b">setUp</a> (self)</td></tr>
<tr class="separator:aa6e2d50c79461ae5d636beaa95d2715b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5a60fd0a3fee12dcf02500e3b3c867"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#afe5a60fd0a3fee12dcf02500e3b3c867">tearDown</a> (self)</td></tr>
<tr class="separator:afe5a60fd0a3fee12dcf02500e3b3c867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca2e5f6b50a692b6860fb0a3be2dfe5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#abca2e5f6b50a692b6860fb0a3be2dfe5">test_WINNF_FT_S_GRA_1</a> (self)</td></tr>
<tr class="separator:abca2e5f6b50a692b6860fb0a3be2dfe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a453e33deab2fc5c28e0506459226a97c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a453e33deab2fc5c28e0506459226a97c">test_WINNF_FT_S_GRA_2</a> (self)</td></tr>
<tr class="separator:a453e33deab2fc5c28e0506459226a97c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1f5799f02445aceaa2cfd843e85b582"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#af1f5799f02445aceaa2cfd843e85b582">test_WINNF_FT_S_GRA_3</a> (self)</td></tr>
<tr class="separator:af1f5799f02445aceaa2cfd843e85b582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f2ac57cf418fccd4093ca20ce2acb2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a66f2ac57cf418fccd4093ca20ce2acb2">test_WINNF_FT_S_GRA_4</a> (self)</td></tr>
<tr class="separator:a66f2ac57cf418fccd4093ca20ce2acb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff8c7e8435f9be776d79520a82e8c288"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#aff8c7e8435f9be776d79520a82e8c288">test_WINNF_FT_S_GRA_7</a> (self)</td></tr>
<tr class="separator:aff8c7e8435f9be776d79520a82e8c288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b09aed06fe88e98679f8d547fa5d193"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a2b09aed06fe88e98679f8d547fa5d193">test_WINNF_FT_S_GRA_8</a> (self)</td></tr>
<tr class="separator:a2b09aed06fe88e98679f8d547fa5d193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21141affece7458af2b68c5d9a62cfa9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a21141affece7458af2b68c5d9a62cfa9">test_WINNF_FT_S_GRA_9</a> (self)</td></tr>
<tr class="separator:a21141affece7458af2b68c5d9a62cfa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea1b5b02b16c21167a6fc3ac207fa1a6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#aea1b5b02b16c21167a6fc3ac207fa1a6">test_WINNF_FT_S_GRA_10</a> (self)</td></tr>
<tr class="separator:aea1b5b02b16c21167a6fc3ac207fa1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57891611cbef75fc784c2a746b96ce62"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a57891611cbef75fc784c2a746b96ce62">test_WINNF_FT_S_GRA_13</a> (self)</td></tr>
<tr class="separator:a57891611cbef75fc784c2a746b96ce62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09a32ae1afb57f88463a210f40d9cd8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#ab09a32ae1afb57f88463a210f40d9cd8">test_WINNF_FT_S_GRA_11</a> (self)</td></tr>
<tr class="separator:ab09a32ae1afb57f88463a210f40d9cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4e0ca7d87cc58d14deb80edcea9285"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#aed4e0ca7d87cc58d14deb80edcea9285">test_WINNF_FT_S_GRA_12</a> (self)</td></tr>
<tr class="separator:aed4e0ca7d87cc58d14deb80edcea9285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdaf2d8253766b003752fe5d1ee4d3de"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#afdaf2d8253766b003752fe5d1ee4d3de">test_WINNF_FT_S_GRA_15</a> (self)</td></tr>
<tr class="separator:afdaf2d8253766b003752fe5d1ee4d3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b24f655fa38b9d15c0b31411685699f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#a3b24f655fa38b9d15c0b31411685699f">test_WINNF_FT_S_GRA_16</a> (self)</td></tr>
<tr class="separator:a3b24f655fa38b9d15c0b31411685699f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html">src.harness.sas_testcase.SasTestCase</a></td></tr>
<tr class="memitem:a9c891ecb812c5bb01c6cf7889bc055e5 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a9c891ecb812c5bb01c6cf7889bc055e5">setUp</a> (self)</td></tr>
<tr class="separator:a9c891ecb812c5bb01c6cf7889bc055e5 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b174d9d703f17f0841d9f6432d412cd inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a5b174d9d703f17f0841d9f6432d412cd">tearDown</a> (self)</td></tr>
<tr class="separator:a5b174d9d703f17f0841d9f6432d412cd inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c8ed47dc38080c5124598fcd3065ad inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a44c8ed47dc38080c5124598fcd3065ad">assertContainsRequiredFields</a> (self, schema_filename, response)</td></tr>
<tr class="separator:a44c8ed47dc38080c5124598fcd3065ad inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1690e73264aa42576f9e1bbd37e4d2b0 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a1690e73264aa42576f9e1bbd37e4d2b0">assertValidResponseFormatForApprovedGrant</a> (self, grant_response)</td></tr>
<tr class="separator:a1690e73264aa42576f9e1bbd37e4d2b0 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b72ffa7d5098fb69bc91ddf7ee7f20 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a28b72ffa7d5098fb69bc91ddf7ee7f20">assertRegistered</a> (self, registration_request, conditional_registration_data=None)</td></tr>
<tr class="separator:a28b72ffa7d5098fb69bc91ddf7ee7f20 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a870278c04283b472528a33ba80519c67 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a870278c04283b472528a33ba80519c67">assertRegisteredAndGranted</a> (self, registration_request, grant_request, conditional_registration_data=None)</td></tr>
<tr class="separator:a870278c04283b472528a33ba80519c67 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07399b1245ce721e50bf461a1ffba35b inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a07399b1245ce721e50bf461a1ffba35b">assertHeartbeatsSuccessful</a> (self, cbsd_ids, grant_ids, operation_states)</td></tr>
<tr class="separator:a07399b1245ce721e50bf461a1ffba35b inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37531ba8b66f680fc4a47a2d45bda5c3 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a37531ba8b66f680fc4a47a2d45bda5c3">TriggerDailyActivitiesImmediatelyAndWaitUntilComplete</a> (self)</td></tr>
<tr class="separator:a37531ba8b66f680fc4a47a2d45bda5c3 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c48084a45c1953e0f1b658bec5c66f8 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dc5/classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase.html#a2c48084a45c1953e0f1b658bec5c66f8">assertChannelsContainFrequencyRange</a> (self, channels, frequency_range)</td></tr>
<tr class="separator:a2c48084a45c1953e0f1b658bec5c66f8 inherit pub_methods_classsrc_1_1harness_1_1sas__testcase_1_1SasTestCase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface')"><img src="../../closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html">src.harness.sas_interface.SasTestcaseInterface</a></td></tr>
<tr class="memitem:a9bed0dc5d867e827f127dc2fa1be3617 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#a9bed0dc5d867e827f127dc2fa1be3617">assertContainsRequiredFields</a> (self, schema_filename, response)</td></tr>
<tr class="separator:a9bed0dc5d867e827f127dc2fa1be3617 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30381223329eaa6c5394735a2ef90901 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#a30381223329eaa6c5394735a2ef90901">assertValidResponseFormatForApprovedGrant</a> (self, grant_response)</td></tr>
<tr class="separator:a30381223329eaa6c5394735a2ef90901 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5fdeb19b3235937e0fe9b447297f7ec inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#ae5fdeb19b3235937e0fe9b447297f7ec">assertRegistered</a> (self, registration_request, conditional_registration_data=None)</td></tr>
<tr class="separator:ae5fdeb19b3235937e0fe9b447297f7ec inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b0593c135c9f69cba9eb4b359bdfa2 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#a36b0593c135c9f69cba9eb4b359bdfa2">assertRegisteredAndGranted</a> (self, registration_request, grant_request, conditional_registration_data=None)</td></tr>
<tr class="separator:a36b0593c135c9f69cba9eb4b359bdfa2 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3063ac0a2ee6da35384273e1cff1d74 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#ac3063ac0a2ee6da35384273e1cff1d74">assertHeartbeatsSuccessful</a> (self, cbsd_ids, grant_ids, operation_states)</td></tr>
<tr class="separator:ac3063ac0a2ee6da35384273e1cff1d74 inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39812d93a172aad20d1ec3006ade06bb inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/ded/classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface.html#a39812d93a172aad20d1ec3006ade06bb">TriggerDailyActivitiesImmediatelyAndWaitUntilComplete</a> (self)</td></tr>
<tr class="separator:a39812d93a172aad20d1ec3006ade06bb inherit pub_methods_classsrc_1_1harness_1_1sas__interface_1_1SasTestcaseInterface"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:afe7770a4625df1588074fe37051fd1e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/de0/classsrc_1_1harness_1_1testcases_1_1WINNF__FT__S__GRA__testcase_1_1GrantTestcase.html#afe7770a4625df1588074fe37051fd1e3">_sas_admin</a></td></tr>
<tr class="separator:afe7770a4625df1588074fe37051fd1e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa6e2d50c79461ae5d636beaa95d2715b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.setUp </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keyword">def </span>setUp(self):</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    self._sas, self._sas_admin = sas.GetTestingSas()</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    self._sas_admin.Reset()</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe5a60fd0a3fee12dcf02500e3b3c867"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.tearDown </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">def </span>tearDown(self):</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abca2e5f6b50a692b6860fb0a3be2dfe5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_1 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Federal Incumbent present in the PAL frequency range requested by the CBSD
 who is inside the DPA Neighborhood.
 
 grant responseCode = 0 and in heartbeat responseCode = 501(SUSPENDED_GRANT)
 or  grant responseCode = 400
</pre> <div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_1(self):</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Federal Incumbent present in the PAL frequency range requested by the CBSD</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="stringliteral">     who is inside the DPA Neighborhood.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="stringliteral">     </span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral">     grant responseCode = 0 and in heartbeat responseCode = 501(SUSPENDED_GRANT)</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">     or  grant responseCode = 400</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment"># Trigger SAS to load DPAs</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    self._sas_admin.TriggerLoadDpas()</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment"># Trigger SAS to de-active all the DPAs </span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    self._sas_admin.TriggerBulkDpaActivation({<span class="stringliteral">&#39;activate&#39;</span>:<span class="keyword">False</span>})</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">#Fix PAl frequency</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    pal_low_frequency = 3600000000</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    pal_high_frequency = 3610000000</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment"># Load the device</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment"># Load PAL and PPA</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    pal_record = json.load(</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_2.json&#39;</span>)))</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    ppa_record = json.load(</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_2.json&#39;</span>)))</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    ppa_record, pal_record = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(ppa_record,</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                            [pal_record],</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                                            pal_low_frequency,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                                                            pal_high_frequency,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                            device_a[<span class="stringliteral">&#39;userId&#39;</span>])</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment"># Move the device into the PPA zone</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment"># Register device</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    cbsd_ids = self.assertRegistered([device_a])</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment"># Update PPA record with device_a&#39;s CBSD ID and Inject data</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    ppa_record[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[0]]</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record[0])</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record})</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment"># Trigger SAS to active one DPA on channel c</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    self._sas_admin.TriggerDpaActivation(\</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {<span class="stringliteral">&#39;frequencyRange&#39;</span>:{<span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency ,\</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                           <span class="stringliteral">&#39;highFrequency&#39;</span>:pal_high_frequency },<span class="stringliteral">&#39;dpaId&#39;</span>:<span class="stringliteral">&#39;east_dpa4&#39;</span>})</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment"># UNAPPROVED Not in WINNF-TS-0016 Release 1 Spec, but necessary Step for DPA</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    time.sleep(240) </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment"># Send grant request</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][<span class="stringliteral">&#39;lowFrequency&#39;</span>] \</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        = pal_low_frequency</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][<span class="stringliteral">&#39;highFrequency&#39;</span>] \</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        = pal_high_frequency     </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0]}</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>][0]</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment"># Check grant response</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[0])</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>] == 400 :</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    self.assertTrue(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    grant_id = response[<span class="stringliteral">&#39;grantId&#39;</span>]</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;PAL&#39;</span>)</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    heartbeat_request = {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="stringliteral">&#39;cbsdId&#39;</span>: cbsd_ids[0],</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="stringliteral">&#39;grantId&#39;</span>: grant_id,</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="stringliteral">&#39;operationState&#39;</span>: <span class="stringliteral">&#39;GRANTED&#39;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    del request, response</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment"># Send heartbeat request</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    request = {<span class="stringliteral">&#39;heartbeatRequest&#39;</span>: [heartbeat_request]}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    response = self._sas.Heartbeat(request)[<span class="stringliteral">&#39;heartbeatResponse&#39;</span>][0]</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment"># Check heartbeat response</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 501)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[0])        </div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;grantId&#39;</span>], grant_id)</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    transmit_expire_time = datetime.strptime(response[<span class="stringliteral">&#39;transmitExpireTime&#39;</span>],</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                               <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    self.assertLessEqual(transmit_expire_time, datetime.utcnow())</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="ttc" id="namespacesrc_1_1harness_1_1util_html_a105dd692e0d0640cc251860113ff5a97"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">src.harness.util.getRandomLatLongInPolygon</a></div><div class="ttdeci">def getRandomLatLongInPolygon(ppa)</div><div class="ttdef"><b>Definition:</b> util.py:121</div></div>
<div class="ttc" id="namespacesrc_1_1harness_1_1util_html_ad781031fc0a08430a583769551ac9b40"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">src.harness.util.makePpaAndPalRecordsConsistent</a></div><div class="ttdeci">def makePpaAndPalRecordsConsistent(ppa_record, pal_records, low_frequency, high_frequency, user_id, fcc_channel_id=&quot;1&quot;)</div><div class="ttdef"><b>Definition:</b> util.py:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea1b5b02b16c21167a6fc3ac207fa1a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_10 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">First request for 2 devices granted as PAL and GAA channel,
send next request for PAL and GAA channel for the same frequency range.

Response Code '0' for first request and '401' for next request.
</pre> <div class="fragment"><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_10(self):</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;First request for 2 devices granted as PAL and GAA channel,</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral">    send next request for PAL and GAA channel for the same frequency range.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">    Response Code &#39;0&#39; for first request and &#39;401&#39; for next request.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="comment"># Load two devices.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment"># Load data</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    pal_record = json.load(</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_0.json&#39;</span>)))</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    pal_low_frequency = 3550000000</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    pal_high_frequency = 3560000000</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    ppa_record = json.load(</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_0.json&#39;</span>)))</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    ppa_record, pal_record = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(ppa_record,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                                            [pal_record],</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                                            pal_low_frequency,</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                                            pal_high_frequency,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                                            device_a[<span class="stringliteral">&#39;userId&#39;</span>])</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment"># Insert device_a into the PPA zone.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record)</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment"># Register 2 devices</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    cbsd_ids = self.assertRegistered([device_a, device_c])</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment"># Update PPA Record with CBSD ID and Inject data.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    ppa_record[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[0]]</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record[0])</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record})</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment"># Create grant request</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency,</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: pal_high_frequency</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    grant_1 = json.load(</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3560000000,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3570000000</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1]}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment"># Send grant request first time</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="comment"># Check grant response, must be response code 0.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    self.assertEqual(len(response), 2)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">for</span> response_num <span class="keywordflow">in</span> [0, 1]:</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      self.assertTrue(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      self.assertTrue(<span class="stringliteral">&#39;grantExpireTime&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      datetime.strptime(response[response_num][<span class="stringliteral">&#39;grantExpireTime&#39;</span>],</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                        <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      self.assertTrue(<span class="stringliteral">&#39;heartbeatInterval&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      self.assertIsInstance(response[response_num][<span class="stringliteral">&#39;heartbeatInterval&#39;</span>], int)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      self.assertTrue(response[response_num][<span class="stringliteral">&#39;heartbeatInterval&#39;</span>] &gt; 0)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;operationParam&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;PAL&#39;</span>)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;GAA&#39;</span>)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    del request, response</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1]}</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment"># Send the same grant request again.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment"># Check grant response, must be response code 401.</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">for</span> response_num <span class="keywordflow">in</span> [0, 1]:</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;grantExpireTime&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;heartbeatInterval&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;operationParam&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;channelType&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 401)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="ttc" id="namespacesrc_1_1harness_1_1util_html_a105dd692e0d0640cc251860113ff5a97"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">src.harness.util.getRandomLatLongInPolygon</a></div><div class="ttdeci">def getRandomLatLongInPolygon(ppa)</div><div class="ttdef"><b>Definition:</b> util.py:121</div></div>
<div class="ttc" id="namespacesrc_1_1harness_1_1util_html_ad781031fc0a08430a583769551ac9b40"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">src.harness.util.makePpaAndPalRecordsConsistent</a></div><div class="ttdeci">def makePpaAndPalRecordsConsistent(ppa_record, pal_records, low_frequency, high_frequency, user_id, fcc_channel_id=&quot;1&quot;)</div><div class="ttdef"><b>Definition:</b> util.py:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab09a32ae1afb57f88463a210f40d9cd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_11 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Un-Supported CBSD maximum EIRP

The response should be:
- 103 (INVALID_VALUE) for all initial grant requests
- 0 for all 2nd grant requests
</pre> <div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_11(self):</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Un-Supported CBSD maximum EIRP</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="stringliteral">    The response should be:</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="stringliteral">    - 103 (INVALID_VALUE) for all initial grant requests</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="stringliteral">    - 0 for all 2nd grant requests</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment"># Register five devices</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment"># devices 1,2 category A</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment"># devices 3-5 category B</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    device_1 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    device_2 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    device_3 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_b.json&#39;</span>)))</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    device_4 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_d.json&#39;</span>)))</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    device_5 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_h.json&#39;</span>)))</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment"># Pre-load conditionals for cbsdIDs 3,4,5 (cbsdCategory B)</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    conditionals_3 = {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="stringliteral">&#39;cbsdCategory&#39;</span>: device_3[<span class="stringliteral">&#39;cbsdCategory&#39;</span>],</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="stringliteral">&#39;fccId&#39;</span>: device_3[<span class="stringliteral">&#39;fccId&#39;</span>],</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>: device_3[<span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>],</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="stringliteral">&#39;airInterface&#39;</span>: device_3[<span class="stringliteral">&#39;airInterface&#39;</span>],</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="stringliteral">&#39;installationParam&#39;</span>: device_3[<span class="stringliteral">&#39;installationParam&#39;</span>],</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="stringliteral">&#39;measCapability&#39;</span>: device_3[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="comment"># add eirpCapability=40 to only conditional forcbsdId 4</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    device_4[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;eirpCapability&#39;</span>] = 40</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    conditionals_4 = {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="stringliteral">&#39;cbsdCategory&#39;</span>: device_4[<span class="stringliteral">&#39;cbsdCategory&#39;</span>],</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="stringliteral">&#39;fccId&#39;</span>: device_4[<span class="stringliteral">&#39;fccId&#39;</span>],</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>: device_4[<span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>],</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="stringliteral">&#39;airInterface&#39;</span>: device_4[<span class="stringliteral">&#39;airInterface&#39;</span>],</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="stringliteral">&#39;installationParam&#39;</span>: device_4[<span class="stringliteral">&#39;installationParam&#39;</span>],</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="stringliteral">&#39;measCapability&#39;</span>: device_4[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        </div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    conditionals_5 = {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="stringliteral">&#39;cbsdCategory&#39;</span>: device_5[<span class="stringliteral">&#39;cbsdCategory&#39;</span>],</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="stringliteral">&#39;fccId&#39;</span>: device_5[<span class="stringliteral">&#39;fccId&#39;</span>],</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>: device_5[<span class="stringliteral">&#39;cbsdSerialNumber&#39;</span>],</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="stringliteral">&#39;airInterface&#39;</span>: device_5[<span class="stringliteral">&#39;airInterface&#39;</span>],</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="stringliteral">&#39;installationParam&#39;</span>: device_5[<span class="stringliteral">&#39;installationParam&#39;</span>],</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="stringliteral">&#39;measCapability&#39;</span>: device_5[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    conditionals = {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="stringliteral">&#39;registrationData&#39;</span>: [conditionals_3, conditionals_4, conditionals_5]</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment"># setup fccMaxEirp for all cbsdIds</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_1[<span class="stringliteral">&#39;fccId&#39;</span>], <span class="stringliteral">&#39;fccMaxEirp&#39;</span>: 30})</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_2[<span class="stringliteral">&#39;fccId&#39;</span>], <span class="stringliteral">&#39;fccMaxEirp&#39;</span>: 20})</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_3[<span class="stringliteral">&#39;fccId&#39;</span>], <span class="stringliteral">&#39;fccMaxEirp&#39;</span>: 40})</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_4[<span class="stringliteral">&#39;fccId&#39;</span>], <span class="stringliteral">&#39;fccMaxEirp&#39;</span>: 47})</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_5[<span class="stringliteral">&#39;fccId&#39;</span>], <span class="stringliteral">&#39;fccMaxEirp&#39;</span>: 30})</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    </div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_1[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_2[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_3[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_4[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_5[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    self._sas_admin.PreloadRegistrationData(conditionals)</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment"># Remove conditionals from registration for cbsdId 3,5</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    del device_3[<span class="stringliteral">&#39;cbsdCategory&#39;</span>]</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    del device_3[<span class="stringliteral">&#39;airInterface&#39;</span>]</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    del device_3[<span class="stringliteral">&#39;installationParam&#39;</span>]</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    del device_3[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    del device_4[<span class="stringliteral">&#39;cbsdCategory&#39;</span>]</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    del device_4[<span class="stringliteral">&#39;airInterface&#39;</span>]</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    del device_4[<span class="stringliteral">&#39;installationParam&#39;</span>]</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    del device_4[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    del device_5[<span class="stringliteral">&#39;cbsdCategory&#39;</span>]</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    del device_5[<span class="stringliteral">&#39;airInterface&#39;</span>]</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    del device_5[<span class="stringliteral">&#39;installationParam&#39;</span>]</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    del device_5[<span class="stringliteral">&#39;measCapability&#39;</span>]</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="comment"># set eirpCapability = 20 for cbsdId 1</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    device_1[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;eirpCapability&#39;</span>] = 20</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    </div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="comment"># send registration requests</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    devices = [device_1, device_2, device_3, device_4, device_5]</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: devices}</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    response = self._sas.Registration(request)[<span class="stringliteral">&#39;registrationResponse&#39;</span>]</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment"># Check registration response</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    cbsd_ids = []</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    self.assertEqual(len(response), 5)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">for</span> x <span class="keywordflow">in</span> range(0, 5):</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      cbsd_ids.append(response[x][<span class="stringliteral">&#39;cbsdId&#39;</span>])</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      self.assertEqual(response[x][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    del request, response</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment"># Prepare 5 grant requests with various un-supported maxEirp values</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    grant_1 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 11</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    grant_2 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    grant_2[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 11</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    grant_3 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    grant_3[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[2]</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    grant_3[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 31</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    grant_4 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    grant_4[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[3]</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    grant_4[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 31</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    grant_5 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    grant_5[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[4]</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    grant_5[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 21</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="comment"># Send the grant requests</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_1, grant_2, grant_3, grant_4, grant_5]}</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="comment"># Check the grant responses</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment"># No grantIds, responseCode should be 103</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    self.assertEqual(len(response), 5)</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">for</span> response_num, resp <span class="keywordflow">in</span> enumerate(response):</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    del request, response</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment"># Prepare 5 grant requests with various supported maxEirp values</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 10</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 10</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    grant_3[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 20</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    grant_4[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 30</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    grant_5[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>] = 20</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="comment"># Send the grant requests</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_1, grant_2, grant_3, grant_4, grant_5]}</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment"># Check the grant responses</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="comment"># response should have valid cbsdIds, grantIds, responseCode 0</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    self.assertEqual(len(response), 5)</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">for</span> response_num, resp <span class="keywordflow">in</span> enumerate(response):</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      self.assertTrue(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    del request, response</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aed4e0ca7d87cc58d14deb80edcea9285"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_12 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Blacklisted CBSD in Array Request (responseCode 101)

The response should be:
- responseCode 0 for the first and second cbsdIds
- responseCode 101 for the third cbsdId
</pre> <div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_12(self):</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Blacklisted CBSD in Array Request (responseCode 101)</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="stringliteral">    The response should be:</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">    - responseCode 0 for the first and second cbsdIds</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="stringliteral">    - responseCode 101 for the third cbsdId</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment"># Register three devices</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    device_1 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    device_2 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    device_3 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_e.json&#39;</span>)))</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_1[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_2[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_3[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_1[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_2[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_3[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="comment"># send registration requests</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    devices = [device_1, device_2, device_3]</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: devices}</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    response = self._sas.Registration(request)[<span class="stringliteral">&#39;registrationResponse&#39;</span>]</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="comment"># Check registration response</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    cbsd_ids = []</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    self.assertEqual(len(response), 3)</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">for</span> resp <span class="keywordflow">in</span> response:</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      cbsd_ids.append(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>])</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    del request, response</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment"># Blacklist the third cbsdId</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    self._sas_admin.BlacklistByFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_3[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment"># Prepare the grant requests</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    grant_1 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    grant_2 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    grant_2[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    grant_3 = json.load(open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    grant_3[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[2]</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="comment"># Send the grant requests</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_1, grant_2, grant_3]}</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="comment"># Check the grant responses</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment"># Each cbsdId should be valid</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    self.assertEqual(len(response), 3)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[0])</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[1])</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    </div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment"># 1st and 2nd cbsdId responseCode should be 0</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment"># 1st and 2nd cbsdId should have channelType set to GAA</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;GAA&#39;</span>)</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;GAA&#39;</span>)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="comment"># 3rd cbsdId responseCode should be 101</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    self.assertEqual(response[2][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 101)</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    del request, response</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    </div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57891611cbef75fc784c2a746b96ce62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_13 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Requests for multiple PAL channels and for multiple GAA channels.

No incumbent present in the PAL and GAA frequency ranges used in the
requests.

The response should be 0.
</pre> <div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_13(self):</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Requests for multiple PAL channels and for multiple GAA channels.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">    No incumbent present in the PAL and GAA frequency ranges used in the</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">    requests.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="stringliteral">    The response should be 0.</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment"># Load 3 devices</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    device_e = json.load(</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_e.json&#39;</span>)))</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment"># First PPA with device_a and FR1 = 3550 - 3560</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    pal_low_frequency1 = 3550000000</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    pal_high_frequency1 = 3560000000</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    pal_record1 = json.load(</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_0.json&#39;</span>)))</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    ppa_record1 = json.load(</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_0.json&#39;</span>)))</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    ppa_record1, pal_record1 = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        ppa_record1, [pal_record1], pal_low_frequency1, pal_high_frequency1,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        device_a[<span class="stringliteral">&#39;userId&#39;</span>])</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment"># Move device_a into the first PPA zone</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record1)</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="comment"># Second PPA with device_c and FR2 = 3600 - 3610</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    pal_low_frequency2 = 3600000000</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    pal_high_frequency2 = 3610000000</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    pal_record2 = json.load(</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_1.json&#39;</span>)))</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    ppa_record2 = json.load(</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_1.json&#39;</span>)))</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    ppa_record2, pal_record2 = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        ppa_record2, [pal_record2], pal_low_frequency2, pal_high_frequency2,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        device_c[<span class="stringliteral">&#39;userId&#39;</span>])</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment"># Move device_c into the second PPA zone</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    device_c[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_c[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record2)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment"># Inject two PAL database records</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record1[0])</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record2[0])</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment"># Register 3 devices.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    cbsd_ids = self.assertRegistered([device_a, device_c, device_e])</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment"># Update PPA record with device_a&#39;s CBSD ID and Inject zone data</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    ppa_record1[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[0]]</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record1})</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment"># Update PPA record with device_c&#39;s CBSD ID and Inject data</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    ppa_record2[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[1]]</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record2})</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment"># Create grant requests</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    grant_1 = json.load(</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    grant_2 = json.load(</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    grant_2[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[2]</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="comment"># Grant 1 &amp; 2: Request for PAL frequency</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment"># Grant 3: Frequency does not overlap with FR1 and FR2</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency1,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: pal_high_frequency1</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency2,</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: pal_high_frequency2</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3630000000,</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3640000000</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1, grant_2]}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment"># Send grant requests</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment"># Check grant response 1 and 2</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    self.assertEqual(len(response), 3)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">for</span> response_num, resp <span class="keywordflow">in</span> enumerate(response[:2]):</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      self.assertTrue(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;PAL&#39;</span>)</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment"># Check grantExpireTime is less than corresponding PAL licenseExpiration</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    self.assertLess(</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        datetime.strptime(response[0][<span class="stringliteral">&#39;grantExpireTime&#39;</span>], <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>),</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        datetime.strptime(</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            pal_record1[0][<span class="stringliteral">&#39;license&#39;</span>][<span class="stringliteral">&#39;licenseExpiration&#39;</span>],</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>))</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    self.assertLess(</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        datetime.strptime(response[1][<span class="stringliteral">&#39;grantExpireTime&#39;</span>], <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>),</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        datetime.strptime(</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            pal_record2[0][<span class="stringliteral">&#39;license&#39;</span>][<span class="stringliteral">&#39;licenseExpiration&#39;</span>],</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>))</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment"># Check grant response 3</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    self.assertEqual(response[2][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[2])</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    self.assertTrue(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[2])</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    self.assertEqual(response[2][<span class="stringliteral">&#39;channelType&#39;</span>], <span class="stringliteral">&#39;GAA&#39;</span>)</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    self.assertEqual(response[2][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="ttc" id="namespacesrc_1_1harness_1_1util_html_a105dd692e0d0640cc251860113ff5a97"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">src.harness.util.getRandomLatLongInPolygon</a></div><div class="ttdeci">def getRandomLatLongInPolygon(ppa)</div><div class="ttdef"><b>Definition:</b> util.py:121</div></div>
<div class="ttc" id="namespacesrc_1_1harness_1_1util_html_ad781031fc0a08430a583769551ac9b40"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">src.harness.util.makePpaAndPalRecordsConsistent</a></div><div class="ttdeci">def makePpaAndPalRecordsConsistent(ppa_record, pal_records, low_frequency, high_frequency, user_id, fcc_channel_id=&quot;1&quot;)</div><div class="ttdef"><b>Definition:</b> util.py:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afdaf2d8253766b003752fe5d1ee4d3de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_15 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Two grant requests: 1. Missing maxEirp and 2. Invalid frequency range.

Returns 102 (MISSING_PARAM) for first request.
    103 (INVALID_VALUE) for second request.
</pre> <div class="fragment"><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_15(self):</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Two grant requests: 1. Missing maxEirp and 2. Invalid frequency range.</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="stringliteral">    Returns 102 (MISSING_PARAM) for first request.</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="stringliteral">            103 (INVALID_VALUE) for second request.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment"># Register two devices</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_a[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_c[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_a[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_c[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: [device_a, device_c]}</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    response = self._sas.Registration(request)[<span class="stringliteral">&#39;registrationResponse&#39;</span>]</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    cbsd_ids = []</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">for</span> resp <span class="keywordflow">in</span> response:</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      cbsd_ids.append(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>])</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    del request, response</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment"># Prepare grant requests.</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment"># 1. maxEirp is missing.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    del grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>]</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment"># 2. highFrequency is lower than the lowFrequency.</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    grant_1 = json.load(</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3650000000,</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3550000000</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1]}</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment"># Send grant request and get response</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    self.assertEqual(len(response), 2)</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="comment"># Check grant response # 1</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[0])</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[0])</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 102)</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment"># Check grant response # 2</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[1])</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[1])</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b24f655fa38b9d15c0b31411685699f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_16 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Two grant requests for overlapping frequency range.

Returns 401 (GRANT_CONFLICT) for at least one request.
</pre> <div class="fragment"><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_16(self):</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Two grant requests for overlapping frequency range.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="stringliteral">    Returns 401 (GRANT_CONFLICT) for at least one request.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="comment"># Register a device</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_a[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_a[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: [device_a]}</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    response = self._sas.Registration(request)[<span class="stringliteral">&#39;registrationResponse&#39;</span>][0]</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    cbsd_id = response[<span class="stringliteral">&#39;cbsdId&#39;</span>]</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    del request, response</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment"># Prepare grant requests with overlapping frequency range</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_id</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3560000000,</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3570000000</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    grant_1 = json.load(</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_id</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3560000000,</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3580000000</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1]}</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment"># Send grant request and get response</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="comment"># Check grant response</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    self.assertEqual(len(response), 2)</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_id)</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_id)</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    self.assertTrue(response[0][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>] == 401</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    <span class="keywordflow">or</span> response[1][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>] == 401)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">for</span> resp <span class="keywordflow">in</span> response:</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">if</span> resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>] == 0:</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="comment"># Check grantExpireTime with a correct format is included.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        self.assertTrue(<span class="stringliteral">&#39;grantExpireTime&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        grant_expire_time = datetime.strptime(</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            resp[<span class="stringliteral">&#39;grantExpireTime&#39;</span>], <span class="stringliteral">&#39;%Y-%m-%dT%H:%M:%SZ&#39;</span>)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        self.assertLess(datetime.utcnow(), grant_expire_time)</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="comment"># Check heartbeatInterval with a correct format is included.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        self.assertTrue(<span class="stringliteral">&#39;heartbeatInterval&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        self.assertIsInstance(resp[<span class="stringliteral">&#39;heartbeatInterval&#39;</span>], int)</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;        self.assertTrue(resp[<span class="stringliteral">&#39;heartbeatInterval&#39;</span>] &gt; 0)</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a453e33deab2fc5c28e0506459226a97c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_2 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Grant request array with various required parameters missing.

1. Missing cbsdId
2. Missing operationParam object
3. Missing maxEirp
4. Missing highFrequency
5. Missing lowFrequency

Returns 102 (MISSING_PARAM) for all requests.
</pre> <div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_2(self):</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Grant request array with various required parameters missing.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="stringliteral">    1. Missing cbsdId</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral">    2. Missing operationParam object</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">    3. Missing maxEirp</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">    4. Missing highFrequency</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">    5. Missing lowFrequency</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">    Returns 102 (MISSING_PARAM) for all requests.</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment"># Register the devices</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    registration_request = []</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span> device_filename <span class="keywordflow">in</span> (<span class="stringliteral">&#39;device_a.json&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>, <span class="stringliteral">&#39;device_e.json&#39;</span>,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                            <span class="stringliteral">&#39;device_f.json&#39;</span>, <span class="stringliteral">&#39;device_g.json&#39;</span>):</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      device = json.load(</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, device_filename)))</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      registration_request.append(device)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: registration_request}</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    response = self._sas.Registration(request)[<span class="stringliteral">&#39;registrationResponse&#39;</span>]</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment"># Check registration response</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    cbsd_ids = []</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">for</span> resp <span class="keywordflow">in</span> response:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      cbsd_ids.append(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>])</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    del request, response</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment"># Prepare grant requests.</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment"># 1. Missing cbsdId.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment"># 2. Missing operationParam object.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    grant_1 = {<span class="stringliteral">&#39;cbsdId&#39;</span>: cbsd_ids[1]}</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment"># 3. Missing maxEirp.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    grant_2 = json.load(</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    grant_2[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[2]</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    del grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;maxEirp&#39;</span>]</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment"># 4. Missing highFrequency.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    grant_3 = json.load(</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    grant_3[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[3]</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    del grant_3[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][<span class="stringliteral">&#39;highFrequency&#39;</span>]</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment"># 5. Missing lowFrequency.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    grant_4 = json.load(</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    grant_4[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[4]</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    del grant_4[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][<span class="stringliteral">&#39;lowFrequency&#39;</span>]</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1, grant_2, grant_3, grant_4]}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment"># Send grant request and get response</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    self.assertEqual(len(response), 5)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment"># Check grant response # 1</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;cbsdId&#39;</span> <span class="keywordflow">in</span> response[0])</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[0])</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 102)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment"># Check grant response # 2, 3, 4, 5</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">for</span> response_num <span class="keywordflow">in</span> (1, 2, 3, 4):</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response[response_num])</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      self.assertEqual(response[response_num][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 102)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af1f5799f02445aceaa2cfd843e85b582"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_3 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">CBSD grant request when CBSD ID does not exist in SAS.
CBSD sends grant request when its CBSD Id is not in SAS. The response
should be FAIL.
</pre> <div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_3(self):</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;CBSD grant request when CBSD ID does not exist in SAS.</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">    CBSD sends grant request when its CBSD Id is not in SAS. The response</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">    should be FAIL.</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment"># Send grant request with CBSD ID not exists in SAS</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = <span class="stringliteral">&#39;A non-exist cbsd id&#39;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0]}</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>][0]</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment"># Check grant response</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;cbsdId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66f2ac57cf418fccd4093ca20ce2acb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_4 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">cbsdId send by the CBSD is not its cbsdId but some other.

 SAS rejects the request by sending responseCode 103
</pre> <div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_4(self):</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;cbsdId send by the CBSD is not its cbsdId but some other.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">     SAS rejects the request by sending responseCode 103</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment"># Load device_a [cert|key]</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    device_a_cert = os.path.join(<span class="stringliteral">&#39;certs&#39;</span>, <span class="stringliteral">&#39;device_a.cert&#39;</span>)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    device_a_key = os.path.join(<span class="stringliteral">&#39;certs&#39;</span>, <span class="stringliteral">&#39;device_a.key&#39;</span>)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment"># Register the first device with certificates</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_a[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_a[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: [device_a]}</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    response = self._sas.Registration(request, device_a_cert,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                      device_a_key)[<span class="stringliteral">&#39;registrationResponse&#39;</span>][0]</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment"># Check registration response</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    cbsd_id_a = response[<span class="stringliteral">&#39;cbsdId&#39;</span>]</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    del request, response</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment"># Load device_c [cert|key]</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    device_c_cert = os.path.join(<span class="stringliteral">&#39;certs&#39;</span>, <span class="stringliteral">&#39;device_c.cert&#39;</span>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    device_c_key = os.path.join(<span class="stringliteral">&#39;certs&#39;</span>, <span class="stringliteral">&#39;device_c.key&#39;</span>)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment"># Register the second device with certificates</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_c[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_c[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: [device_c]}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    response = self._sas.Registration(request, device_c_cert,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                      device_c_key)[<span class="stringliteral">&#39;registrationResponse&#39;</span>][0]</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    cbsd_id_c = response[<span class="stringliteral">&#39;cbsdId&#39;</span>]</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    del request, response</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="comment"># Send grant request for device_a using device_c_cert and device_c_key</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_id_a</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0]}</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    response = self._sas.Grant(request, device_c_cert, device_c_key)[<span class="stringliteral">&#39;grantResponse&#39;</span>][0]</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment"># Check grant Response</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;cbsdId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aff8c7e8435f9be776d79520a82e8c288"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_7 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Invalid operationFrequencyRange.

The response should be:
- 103 (INVALID_VALUE) for first request.
- 103 or 300 (UNSUPPORTED_SPECTRUM) for second and third requests.
</pre> <div class="fragment"><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_7(self):</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Invalid operationFrequencyRange.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">    The response should be:</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">    - 103 (INVALID_VALUE) for first request.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral">    - 103 or 300 (UNSUPPORTED_SPECTRUM) for second and third requests.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment"># Register three devices</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    device_e = json.load(</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_e.json&#39;</span>)))</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_a[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_c[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    self._sas_admin.InjectFccId({<span class="stringliteral">&#39;fccId&#39;</span>: device_e[<span class="stringliteral">&#39;fccId&#39;</span>]})</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_a[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_c[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    self._sas_admin.InjectUserId({<span class="stringliteral">&#39;userId&#39;</span>: device_e[<span class="stringliteral">&#39;userId&#39;</span>]})</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    devices = [device_a, device_c, device_e]</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    request = {<span class="stringliteral">&#39;registrationRequest&#39;</span>: devices}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    response = self._sas.Registration(request)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment"># Check registration response</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    cbsd_ids = []</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">for</span> resp <span class="keywordflow">in</span> response[<span class="stringliteral">&#39;registrationResponse&#39;</span>]:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 0)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      cbsd_ids.append(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>])</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    del request, response</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment"># Prepare 3 grant requests.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment"># 1. With lowFrequency &gt; highFrequency.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: 3650000000,</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: 3550000000</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment"># 2. With frequency range completely outside the CBRS band.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    grant_1 = json.load(</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    grant_1[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>] = 3350000000</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    grant_1[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>] = 3450000000</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment"># 3. With frequency range partially overlapping with the CBRS band.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    grant_2 = json.load(</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    grant_2[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[2]</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>] = 3450000000</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    grant_2[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>][</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>] = 3650000000</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0, grant_1, grant_2]}</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment"># Send grant request and get response</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>]</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment"># Check grant response array</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    self.assertEqual(len(response), 3)</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">for</span> response_num, resp <span class="keywordflow">in</span> enumerate(response):</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      self.assertEqual(resp[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[response_num])</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> resp)</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    self.assertEqual(response[0][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    self.assertEqual(response[1][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 300)</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    self.assertEqual(response[2][<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 300)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b09aed06fe88e98679f8d547fa5d193"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_8 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">CBSD requests a frequency range which is a mix of PAL and GAA channel.

The Response Code should be 103.
</pre> <div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_8(self):</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;CBSD requests a frequency range which is a mix of PAL and GAA channel.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="stringliteral">    The Response Code should be 103.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment"># Load a device.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment"># Load data</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    pal_record = json.load(</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_0.json&#39;</span>)))</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    pal_low_frequency = 3550000000</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    pal_high_frequency = 3560000000</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    ppa_record = json.load(</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_0.json&#39;</span>)))</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    ppa_record, pal_record = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(ppa_record,</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                                            [pal_record],</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                                            pal_low_frequency,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                                            pal_high_frequency,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                                            device_a[<span class="stringliteral">&#39;userId&#39;</span>])</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment"># Move the device into the PPA zone</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record)</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="comment"># Register device</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    cbsd_ids = self.assertRegistered([device_a])</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment"># Update PPA record with device_a&#39;s CBSD ID and Inject data</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    ppa_record[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[0]]</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record[0])</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record})</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment"># Create grant request</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    grant_0 = json.load(</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    grant_0[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[0]</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment"># Set overlapping PAL frequency spectrum</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    grant_0[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency,</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: pal_high_frequency + 10000000</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_0]}</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment"># Send grant request</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>][0]</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment"># Check grant response</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[0])</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 103)</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="ttc" id="namespacesrc_1_1harness_1_1util_html_a105dd692e0d0640cc251860113ff5a97"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">src.harness.util.getRandomLatLongInPolygon</a></div><div class="ttdeci">def getRandomLatLongInPolygon(ppa)</div><div class="ttdef"><b>Definition:</b> util.py:121</div></div>
<div class="ttc" id="namespacesrc_1_1harness_1_1util_html_ad781031fc0a08430a583769551ac9b40"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">src.harness.util.makePpaAndPalRecordsConsistent</a></div><div class="ttdeci">def makePpaAndPalRecordsConsistent(ppa_record, pal_records, low_frequency, high_frequency, user_id, fcc_channel_id=&quot;1&quot;)</div><div class="ttdef"><b>Definition:</b> util.py:148</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a21141affece7458af2b68c5d9a62cfa9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase.test_WINNF_FT_S_GRA_9 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Frequency range requested by a CBSD overlaps with PAL channel and
the CBSD is inside claimed PPA boundary.

Response Code should be 400 for second device
</pre> <div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keyword">def </span>test_WINNF_FT_S_GRA_9(self):</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Frequency range requested by a CBSD overlaps with PAL channel and</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral">    the CBSD is inside claimed PPA boundary.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">    Response Code should be 400 for second device</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment"># Load the devices, data</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    device_a = json.load(</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_a.json&#39;</span>)))</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    device_c = json.load(</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;device_c.json&#39;</span>)))</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    pal_record = json.load(</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;pal_record_0.json&#39;</span>)))</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    pal_low_frequency = 3550000000</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    pal_high_frequency = 3560000000</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    user_id = device_a[<span class="stringliteral">&#39;userId&#39;</span>]</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    ppa_record = json.load(</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;ppa_record_0.json&#39;</span>)))</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    ppa_record, pal_record = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">makePpaAndPalRecordsConsistent</a>(ppa_record,</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                                            [pal_record],</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                                            pal_low_frequency,</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                                            pal_high_frequency,</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                                            user_id)</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment"># Move device_a and device_c into the PPA zone</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_a[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    device_c[<span class="stringliteral">&#39;installationParam&#39;</span>][<span class="stringliteral">&#39;latitude&#39;</span>], device_c[<span class="stringliteral">&#39;installationParam&#39;</span>][</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="stringliteral">&#39;longitude&#39;</span>] = <a class="code" href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">getRandomLatLongInPolygon</a>(ppa_record)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment"># Register the two devices.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    cbsd_ids = self.assertRegistered([device_a, device_c])</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment"># Update PPA record with only device_a&#39;s CBSD ID and Inject data</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    ppa_record[<span class="stringliteral">&#39;ppaInfo&#39;</span>][<span class="stringliteral">&#39;cbsdReferenceId&#39;</span>] = [cbsd_ids[0]]</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    self._sas_admin.InjectPalDatabaseRecord(pal_record[0])</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    zone_id = self._sas_admin.InjectZoneData({<span class="stringliteral">&#39;record&#39;</span>: ppa_record})</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    self.assertTrue(zone_id)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment"># Trigger daily activities</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    self.TriggerDailyActivitiesImmediatelyAndWaitUntilComplete()</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment"># Create grant request for second device</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    grant_c = json.load(</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        open(os.path.join(<span class="stringliteral">&#39;testcases&#39;</span>, <span class="stringliteral">&#39;testdata&#39;</span>, <span class="stringliteral">&#39;grant_0.json&#39;</span>)))</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    grant_c[<span class="stringliteral">&#39;cbsdId&#39;</span>] = cbsd_ids[1]</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment"># Set frequency range that overlaps with PAL frequency.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    grant_c[<span class="stringliteral">&#39;operationParam&#39;</span>][<span class="stringliteral">&#39;operationFrequencyRange&#39;</span>] = {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="stringliteral">&#39;lowFrequency&#39;</span>: pal_low_frequency,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="stringliteral">&#39;highFrequency&#39;</span>: pal_high_frequency</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    request = {<span class="stringliteral">&#39;grantRequest&#39;</span>: [grant_c]}</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment"># Send grant request</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    response = self._sas.Grant(request)[<span class="stringliteral">&#39;grantResponse&#39;</span>][0]</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment"># Check grant response for second device response code 400</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;cbsdId&#39;</span>], cbsd_ids[1])</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    self.assertFalse(<span class="stringliteral">&#39;grantId&#39;</span> <span class="keywordflow">in</span> response)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    self.assertEqual(response[<span class="stringliteral">&#39;response&#39;</span>][<span class="stringliteral">&#39;responseCode&#39;</span>], 400)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="ttc" id="namespacesrc_1_1harness_1_1util_html_a105dd692e0d0640cc251860113ff5a97"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#a105dd692e0d0640cc251860113ff5a97">src.harness.util.getRandomLatLongInPolygon</a></div><div class="ttdeci">def getRandomLatLongInPolygon(ppa)</div><div class="ttdef"><b>Definition:</b> util.py:121</div></div>
<div class="ttc" id="namespacesrc_1_1harness_1_1util_html_ad781031fc0a08430a583769551ac9b40"><div class="ttname"><a href="../../d8/d6c/namespacesrc_1_1harness_1_1util.html#ad781031fc0a08430a583769551ac9b40">src.harness.util.makePpaAndPalRecordsConsistent</a></div><div class="ttdeci">def makePpaAndPalRecordsConsistent(ppa_record, pal_records, low_frequency, high_frequency, user_id, fcc_channel_id=&quot;1&quot;)</div><div class="ttdef"><b>Definition:</b> util.py:148</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="afe7770a4625df1588074fe37051fd1e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">src.harness.testcases.WINNF_FT_S_GRA_testcase.GrantTestcase._sas_admin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/nirajan/NetBeansProjects/sas-winnforum/Spectrum-Access-System/Spectrum-Access-System-master/src/harness/testcases/<a class="el" href="../../da/d1d/WINNF__FT__S__GRA__testcase_8py.html">WINNF_FT_S_GRA_testcase.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
