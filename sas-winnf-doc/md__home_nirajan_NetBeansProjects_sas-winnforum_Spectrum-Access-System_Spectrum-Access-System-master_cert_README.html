<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SAS WINNF: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAS WINNF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This directory contains a sample openssl configuration for working with SAS certificates.</p>
<p>To run the examples, use the CACreationScript scripts (PowerShell or BASH) provided. These will generate a root/ directory containing the CA management and tracking data, as well as several role-specific certificates. </p><hr/>
<p>You can also use the openssl.cnf file directly to experiment with the certificates:</p>
<p>To set up, create a CA structure in a sub-directory:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mkdir sasCA</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;mkdir sasCA/newcerts</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;touch sasCA/index.txt</div></div><!-- fragment --><p>This creates the structure for a test CA management system.</p>
<p>Use this command to create the certificate outline which will become the CA root of trust: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl req -new -newkey rsa:2048 -keyout cakey.pem -out careq.pem -config openssl.cnf  -reqexts v3_req_sas_ca</div></div><!-- fragment --><p>This creates a private key file in <code>cakey.pem</code> and an unsigned certificate in <code>careq.pem</code> with the SAS-CA extensions. Note: the certificate included has the password "sasca". The certificate can be examined using the command</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl req -in careq.pem -text</div></div><!-- fragment --><p>Self-sign the certificate with this command: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl ca -create_serial -out cacert.pem -days 10000 -keyfile cakey.pem -selfsign -extensions v3_ca -config openssl.cnf -infiles careq.pem</div></div><!-- fragment --><p>This creates a self-signed cert at <code>cacert.pem</code> valid for many years. It can be viewed with</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl x509 -in cacert.pem -text</div></div><!-- fragment --><p>Now move the files into the <code>sasCA</code> location and clean up:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mv cacert.pem sasCA</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;mkdir sasCA/private</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;mv cakey.pem sasCA/private</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;rm careq.pem</div></div><!-- fragment --><p>Congratulations! You have created and installed a test SAS CA authority root of trust which can be used with the <code>openssl</code> tool to manage the PKI. If you wish to use the root of trust checked into the repository, the CA password is "sasca".</p>
<p><em>Working with the CA</em></p>
<p>To create certificates of various kinds, use these commands:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl req -new -newkey rsa:2048 -nodes -keyout saskey.pem -out sasreq.pem -config openssl.cnf -reqexts sas_req</div></div><!-- fragment --><p>This request can again be viewed with <code>openssl req -in sasreq.pem -text</code></p>
<p>The request can be signed with the CA using this command:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl ca -config openssl.cnf -days 600 -out sascert.pem -infiles sasreq.pem</div></div><!-- fragment --><p>Other certificate requests can be created using the other extension sections in the <code>openssl.cnf</code> file. They can all be signed using the same mechanism. Examples:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;openssl req -new -newkey rsa:2048 -nodes -keyout palkey.pem -out palreq.pem -config openssl.cnf -reqexts pal_req</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;openssl req -new -newkey rsa:2048 -nodes -keyout devkey.pem -out devreq.pem -config openssl.cnf -reqexts device_req</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;openssl req -new -newkey rsa:2048 -nodes -keyout inskey.pem -out insreq.pem -config openssl.cnf -reqexts installer_req</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;openssl req -new -newkey rsa:2048 -nodes -keyout operkey.pem -out operreq.pem -config openssl.cnf -reqexts oper_req</div></div><!-- fragment --><p>There is also a section for creating equipment requests, which can then be signed with the DEVICE intermediate certificate. To use it use <code>-reqexts unit_req</code>. A DEVICE intermediate can be managed in the same way the <code>/sasCA</code> certificate is managed.</p>
<p>A note about TEST:TRUE: This extension explicitly marks a certificate as not being a live production certificate. Clearly security should never rely on this marker; it should only rely on the live root of trust certificate. The extension is simply used for explicit marking of test certificates so they can easily be detected by generic tooling and provide for simple disambiguation of any internal processes in the CBRS ecosystem. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
