<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SAS WINNF: The WinnForum R2-SGN-04 Propagation Model Reference Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAS WINNF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The WinnForum R2-SGN-04 Propagation Model Reference Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This directory holds the reference implementation of the WinnForum propagation models to be used with SAS. This implementation is in Python, and uses the core propagation model engine (in C++) exposed as python extension.</p>
<h2>Main interface</h2>
<p>The two main propagation models provided are accessed through routines:</p>
<ul>
<li><code><a class="el" href="d1/d0c/namespacesrc_1_1harness_1_1reference__models_1_1propagation_1_1wf__itm.html#a141e1d242b1586383c722da69e19cd78">wf_itm.CalcItmPropagationLoss()</a></code>: the ITM propagation model</li>
<li><code><a class="el" href="d0/d2a/namespacesrc_1_1harness_1_1reference__models_1_1propagation_1_1wf__hybrid.html#ae57c7cc8e2c27bd8aa8fe33461d984de">wf_hybrid.CalcHybridPropagationLoss()</a></code>: the hybrid ITM/eHata propagation model</li>
</ul>
<p>See the corresponding docstrings for full description.</p>
<h2>Geo-Data setup</h2>
<p>Before use of the models, one should make sure that the required geodata is correctly set in the WinnForum/data/ folder for:</p>
<ul>
<li>ITU climate and refractivity files (TropClim.txt and n050.txt): in data/itu</li>
<li>USGS 3DEP terrain altitude: in data/geo/ned/</li>
<li>NLCD land cover: in data/geo/nlcd/</li>
</ul>
<h3>Other Location</h3>
<p>If not using these location, you should modify the <a class="el" href="d0/da3/CONFIG_8py.html">geo/CONFIG.py</a> file to specify the absolute path to your folders holding these database. For the NED terrain, one can also directly set the proper terrain directory, using the routines:</p>
<ul>
<li><code>wf_itm.ConfigureTerrainDriver(terrain_dir)</code></li>
<li><code>wf_hybrid.ConfigureTerrainDriver(terrain_dir)</code></li>
</ul>
<h3>NLCD data</h3>
<p>The NLCD land cover data is not directly used by the propagation models, but a region type (among RURAL, SUBURBAN or URBAN) is a required input for the hybrid propagation model.</p>
<p>To access this region type, use the <a class="el" href="df/db9/nlcd_8py.html">geo/nlcd.py</a> module which provides two methods:</p>
<ul>
<li><code>GetRegionType(GetLandCoverCodes(lat, lon))</code>: retrieves the region type for a given lat,lon point</li>
<li><code>RegionNlcdVote(points)</code>: retrieves the region type for an area defined by a list of points.</li>
</ul>
<h3>Data caching</h3>
<p>For efficiency the terrain and NLCD drivers maintain a small tile cache in LRU fashion. Each tile covers a 1x1 degree area (approximately 100km x 100km).</p>
<p>The cache allows to avoid the performance hit of reloading tiles in memory when doing repetitive calls in the same geographical area. To configure the cache size, use:</p>
<ul>
<li><code>wf_itm.ConfigureTerrainDriver(cache_size=4)</code></li>
<li><code>wf_hybrid.ConfigureTerrainDriver(cache_size=4)</code></li>
</ul>
<p>Note that each model uses its own terrain driver, and cache. The memory use is about 50MB * cache_size.</p>
<p>For the NLCD driver, the cache size can be configured directly as following: </p><pre class="fragment"> `nlcd_driver.SetCacheSize(cache_size=8)`
</pre><p>The NLCD driver cache takes about 12MB * cache_size.</p>
<h2>Thread Safety</h2>
<p>The models are not thread-safe. Do <em>not</em> try to run several calculations in parallel (multiprocessing should be fine).</p>
<h2>Core models implementation</h2>
<p>The models make uses of the core model implementation found in the <code>itm</code> and <code>ehata</code> folders.</p>
<p>These implementations are derived from the original ITS C++ source code, with minimal modifications when required for the WinnForum extensions. They are wrapped as python extension modules.</p>
<h3>Compilation in Linux</h3>
<p>To compile these extension modules, you can use the provided top level makefile. Simply type the following command in a shell: </p><pre class="fragment">`make all`
</pre><h3>Compilation in Windows</h3>
<p>The easiest way is to to use the MinGW GCC port for Windows.</p>
<h4>Using gcc provided by MinGW32</h4>
<p>Download and install MingW32 from <a href="http://www.mingw.org:">http://www.mingw.org:</a></p>
<ul>
<li>The download section of this page will redirect you to SourceForge where you can download the MinGW installer: <code>mingw-get-setup.exe</code></li>
<li>Run the installer and select both the <em>mingw32-base</em> and <em>mingw32-gcc-g++* packages. Optionally you can also select the *mingw-developer-toolkit</em> package to be able to use makefiles.</li>
<li>After making selections, proceed with installation by choosing Installation-&gt;Update Catalog-&gt;Review Changes-&gt;Apply</li>
<li>By default the MinGW will be installed in <code>C:/MinGW/</code>.</li>
</ul>
<p>Configuration:</p>
<ul>
<li>Open a command prompt and make sure the directory <code>C:/MinGW/bin</code> is in the Windows path, by typing: <code>PATH</code></li>
<li>If not, add it either:<ul>
<li>in the global path settings, under Control Panel =&gt; System =&gt; Advanced System Settings =&gt; Environment Variables</li>
<li>or directly in your working command prompt, as the leading directory: <code>set PATH=C:/MinGW/bin;PATH%</code></li>
</ul>
</li>
<li>If the developer-toolkit package has been installed, you should now be able able to use <em>make</em> in the reference_models/propagation directory, as is done for linux. If any issue, you might need to specify the compiler (see below).</li>
<li>If the developer-toolkit package has not been selected, then you will need to manually call the python distutils commmand on each of the itm/ and ehata/ subdirectories:</li>
</ul>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;python setup.py build_ext --inplace --compiler=mingw32</div></div><!-- fragment --><p>The *&ndash;compiler* option may be unnecessary if there is no conflict with other compilers in your system.</p>
<p>If during this process, you experience some issues with wrong compiler, or compilation errors, create the file <code>distutils.cfg</code> in your PYTHONPATH\ directory, holding the following content:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;[build]</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;compiler=mingw32</div></div><!-- fragment --><p>In case you are using a 64bit version of Python, the previous steps shall be moified to install and use the MinGW 64 bits instead, and compiler directives <code>compiler=mingw64</code></p>
<h4>Using Microsoft VCC compiler</h4>
<p>The configuration steps should be similar to the MinGW, except that the compiler directive to be used (if necessary) is <code>--compiler=msvc</code>.</p>
<p>If issue with vcvarsall.bat not being found, try to set the following variables in your command terminal:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;set MSSDK=1 </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;set DISTUTILS_USE_SDK=1</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
